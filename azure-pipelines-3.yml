# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: ubuntu-latest

steps:
- task: JFrogToolsInstaller@1
  inputs:
    artifactoryConnection: 'mk-jfrog-artifactory-hts'
    cliInstallationRepo: 'jf-cli-remote'
    installCustomVersion: true
    cliVersion: '2.36.1'

- task: JfrogCliV2@1
  inputs:
    jfrogPlatformConnection: 'mk-jfrog-platform-hts'
    command: |
      jf c add art --url=https://hts2.jfrog.io/ --access-token=cmVmdGtuOjAxOjE3MTQ1NTE0Nzk6VVBHUTBnWlpiYUFoeWQ5eVZoZDNIU0pvMERD --interactive=false
      
      jf config use art
      
      jf npmc --server-id-resolve=art --repo-resolve='npmjs-remote'
      
      jf npm install tar